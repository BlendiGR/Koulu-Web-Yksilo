<!DOCTYPE html>
<html lang="fi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Koulu Projekti</title>
    <meta name="description" content="Start of the web project" />
    <link rel="stylesheet" href="css/global.css" />
    <link rel="stylesheet" href="css/pages/home.css" />
    <link rel="stylesheet" href="css/components/restaurantCards.css" />
    <link rel="stylesheet" href="css/components/restaurantMenuModal.css" />
    <link rel="stylesheet" href="css/components/restaurantMenuPanel.css" />
    <script type="importmap">
      {
        "imports": {
          "geolib": "https://esm.sh/geolib@3.3.4"
        }
      }
    </script>
    <script type="module" src="js/pages/homePage.js"></script>
  </head>
  <body data-page="home">
    <header>
      <nav>
        <a href="index.html">
          <img class="logo" src="public/logo.png" alt="Logo of the site" />
        </a>
        <ul class="nav-links">
          <li><a href="pages/login.html">Kirjaudu</a></li>
        </ul>
      </nav>
    </header>
    <main>
      <div id="cards-map-container">
        <section id="cards-panel">
          <div class="map-controls">
            <div class="autocomplete-container">
              <div class="autocomplete-container">
                <input
                  type="text"
                  id="autocomplete-input"
                  placeholder="Sijaintisi..."
                />
                <span class="help-icon" tabindex="0" aria-label="Kentän ohje"
                  >?</span
                >
                <span class="tooltip-text" role="tooltip"
                  >Kirjoita tähän sijaintisi <br />
                  nähdäksesi lähimmät ravintolat.</span
                >
              </div>
            </div>
            <div class="city-select-container">
              <select id="city-filter" aria-label="Kaupunki">
                <option value="">Kaikki kaupungit</option>
                <option value="helsinki">Helsinki</option>
                <option value="espoo">Espoo</option>
                <option value="vantaa">Vantaa</option>
                <option value="tampere">Tampere</option>
                <option value="turku">Turku</option>
                <option value="oulu">Oulu</option>
                <option value="jyväskylä">Jyväskylä</option>
                <option value="kuopio">Kuopio</option>
                <option value="lahti">Lahti</option>
              </select>
            </div>
            <div class="search-container">
              <input type="text" id="search-input" placeholder="Suodata..." />
              <span class="help-icon" tabindex="0" aria-label="Kentän ohje"
                >?</span
              >
              <span class="tooltip-text" role="tooltip"
                >Suodata hakemalla kaupungilla, yrityksellä tai koululla, <br />
                esimerkiksi: "Helsinki", "Metropolia" tai "Compass Group".
              </span>
            </div>
          </div>
          <aside id="cards-panel">
            <div id="cards-container"></div>
            <div id="menu-panel" class="menu-panel">
              <button id="menu-close" class="menu-close">←</button>

              <div class="menu-header">
                <h2 id="mp-title"></h2>
                <button id="mp-fav-btn" class="fav-btn">★</button>
              </div>

              <p id="mp-address"></p>

              <div class="menu-tabs">
                <button id="mp-daily">Päivälista</button>
                <button id="mp-weekly">Viikkolista</button>
              </div>
              <span id="mp-restaurant-id" style="display: none"></span>
              <div id="mp-menu"></div>
            </div>
          </aside>
        </section>
        <section id="map-container">
          <gmp-map
            center="65.0121,25.4651"
            zoom="5"
            map-id="914bc1b32f958043a488e793"
          ></gmp-map>
        </section>
      </div>
    </main>

    <script>
      window.initMap = async function () {
        try {
          const mod = await import("./js/components/map.js");
          if (mod && typeof mod.initMap === "function") {
            await mod.initMap();
          }
        } catch (e) {
          console.error("Failed to initialize map:", e);
        }
      };
    </script>
    <script src="your-private-googlemaps-key-here" async defer></script>
  </body>
</html>
